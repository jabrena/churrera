@startuml
!theme plain
scale 0.6
title Cursor Cloud Agents Client Module - Class Diagram

package "info.jab.cursor.client" {
  interface CursorAgentManagement {
    + launch(String, String, String, Boolean) : AgentResponse
    + followUp(String, String) : FollowUpResponse
    + delete(String) : DeleteAgentResponse
  }
  
  interface CursorAgentInformation {
    + getAgents(Integer, String) : AgentsList
    + getStatus(String) : AgentResponse
    + getAgentConversation(String) : ConversationResponse
  }
  
  interface CursorAgentGeneralEndpoints {
    + getApiKeyInfo() : ApiKeyInfo
    + getModels() : List<String>
    + getRepositories() : List<String>
  }
}

package "info.jab.cursor.client.impl" {
  class CursorAgentManagementImpl {
    - String apiKey
    - DefaultApi defaultApi
    + CursorAgentManagementImpl(String, DefaultApi)
    + launch(String, String, String, Boolean) : AgentResponse
    + followUp(String, String) : FollowUpResponse
    + delete(String) : DeleteAgentResponse
    - getAuthHeaders() : Map<String, String>
    - createLaunchAgentRequest(String, String, String, boolean) : CreateAgentRequest
  }
  
  class CursorAgentInformationImpl {
    - String apiKey
    - DefaultApi defaultApi
    + CursorAgentInformationImpl(String, DefaultApi)
    + getAgents(Integer, String) : AgentsList
    + getStatus(String) : AgentResponse
    + getAgentConversation(String) : ConversationResponse
    - getAuthHeaders() : Map<String, String>
  }
  
  class CursorAgentGeneralEndpointsImpl {
    - String apiKey
    - DefaultApi defaultApi
    + CursorAgentGeneralEndpointsImpl(String, DefaultApi)
    + getApiKeyInfo() : ApiKeyInfo
    + getModels() : List<String>
    + getRepositories() : List<String>
    - getAuthHeaders() : Map<String, String>
  }
}

package "info.jab.cursor.client.model" {
  record AgentResponse {
    + String id
    + AgentStatus status
    + OffsetDateTime createdAt
    + OffsetDateTime updatedAt
    + Source source
    + Target target
    + {static} from(CreateAgent201Response) : AgentResponse
    + {static} from(ListAgents200ResponseAgentsInner) : AgentResponse
  }
  
  record FollowUpResponse {
    + String id
    + {static} from(DeleteAgent200Response) : FollowUpResponse
  }
  
  record DeleteAgentResponse {
    + String id
    + {static} from(DeleteAgent200Response) : DeleteAgentResponse
  }
  
  record ConversationResponse {
    + List<ConversationMessage> messages
    + {static} from(GetAgentConversation200Response) : ConversationResponse
  }
  
  record ConversationMessage {
    + String text
    + {static} from(GetAgentConversation200ResponseMessagesInner) : ConversationMessage
  }
  
  record AgentsList {
    + List<AgentResponse> agents
    + String cursor
    + {static} from(ListAgents200Response) : AgentsList
  }
  
  record ApiKeyInfo {
    + String id
    + OffsetDateTime createdAt
    + {static} from(GetMe200Response) : ApiKeyInfo
  }
  
  record Source {
    + URI repository
    + String ref
    + {static} from(CreateAgent201ResponseSource) : Source
    + {static} from(ListAgents200ResponseAgentsInnerSource) : Source
  }
  
  record Target {
    + URI branch
    + Boolean autoCreatePr
    + {static} from(CreateAgent201ResponseTarget) : Target
    + {static} from(ListAgents200ResponseAgentsInnerTarget) : Target
  }
  
  enum AgentStatus {
    CREATING
    RUNNING
    COMPLETED
    FAILED
  }
}

' Relationships
CursorAgentManagementImpl ..|> CursorAgentManagement
CursorAgentInformationImpl ..|> CursorAgentInformation
CursorAgentGeneralEndpointsImpl ..|> CursorAgentGeneralEndpoints

CursorAgentManagementImpl --> DefaultApi
CursorAgentManagementImpl --> AgentResponse : returns
CursorAgentManagementImpl --> FollowUpResponse : returns
CursorAgentManagementImpl --> DeleteAgentResponse : returns

CursorAgentInformationImpl --> DefaultApi
CursorAgentInformationImpl --> AgentResponse : returns
CursorAgentInformationImpl --> AgentsList : returns
CursorAgentInformationImpl --> ConversationResponse : returns

CursorAgentGeneralEndpointsImpl --> DefaultApi
CursorAgentGeneralEndpointsImpl --> ApiKeyInfo : returns

AgentResponse --> AgentStatus
AgentResponse --> Source
AgentResponse --> Target

ConversationResponse --> ConversationMessage
AgentsList --> AgentResponse

@enduml
