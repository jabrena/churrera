@startuml
!theme plain
scale 0.6
title Complete Project Class Diagram

package "churrera-cli" {
  class ChurreraCLI
  class RunCommand
  class JobProcessor
  class CLIAgent
  class SequenceWorkflowHandler
  class ParallelWorkflowHandler
  class ChildWorkflowHandler
  class JobRepository
  class Job
  class Prompt
  class AgentState
}

package "churrera-core" {
  class WorkflowParser
  class WorkflowData
  class WorkflowValidator
  class PmlValidator
  class PromptInfo
  class SequenceInfo
  class ParallelWorkflowData
  class PmlConverter
  class PropertyResolver
  class CursorApiKeyResolver
}

package "cursor-cloud-agents-client" {
  interface CursorAgentManagement
  interface CursorAgentInformation
  interface CursorAgentGeneralEndpoints
  class CursorAgentManagementImpl
  class CursorAgentInformationImpl
  class CursorAgentGeneralEndpointsImpl
  class AgentResponse
  class AgentStatus
  class ConversationResponse
}

package "cursor-cloud-agents-openapi" {
  class cloud-agents-openapi
}

' CLI to Core relationships
ChurreraCLI --> WorkflowParser
ChurreraCLI --> WorkflowValidator
ChurreraCLI --> PmlValidator
ChurreraCLI --> PropertyResolver
ChurreraCLI --> CursorApiKeyResolver

RunCommand --> JobProcessor
JobProcessor --> WorkflowParser
JobProcessor --> WorkflowData
JobProcessor --> SequenceWorkflowHandler
JobProcessor --> ParallelWorkflowHandler
JobProcessor --> ChildWorkflowHandler

SequenceWorkflowHandler --> WorkflowData
ParallelWorkflowHandler --> WorkflowData
ParallelWorkflowHandler --> ParallelWorkflowData
ChildWorkflowHandler --> WorkflowData

CLIAgent --> PmlConverter
CLIAgent --> CursorAgentManagement
CLIAgent --> CursorAgentInformation
CLIAgent --> CursorAgentGeneralEndpoints

' Client relationships
CursorAgentManagementImpl ..|> CursorAgentManagement
CursorAgentInformationImpl ..|> CursorAgentInformation
CursorAgentGeneralEndpointsImpl ..|> CursorAgentGeneralEndpoints

CursorAgentManagementImpl --> AgentResponse
CursorAgentInformationImpl --> AgentResponse
CursorAgentInformationImpl --> ConversationResponse
AgentResponse --> AgentStatus

' Repository relationships
JobRepository --> Job
JobRepository --> Prompt

' Data flow
WorkflowParser --> WorkflowData
WorkflowData --> PromptInfo
WorkflowData --> SequenceInfo
WorkflowData --> ParallelWorkflowData
ParallelWorkflowData --> SequenceInfo
SequenceInfo --> PromptInfo

@enduml
